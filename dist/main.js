!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Thinker=e():t.Thinker=e()}(this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=58)}([function(t,e,n){"use strict";var r=Array.isArray;e.a=r},function(t,e,n){"use strict";var r=n(36),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="object"==("undefined"==typeof self?"undefined":o(self))&&self&&self.Object===Object&&self,a=r.a||i||Function("return this")();e.a=a},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=function(t){var e=void 0===t?"undefined":r(t);return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=function(t){return null!=t&&"object"==(void 0===t?"undefined":r(t))}},function(t,e,n){"use strict";var r=n(48),o=n(49),i=n(6);e.a=function(t){return Object(i.a)(t)?Object(r.a)(t):Object(o.a)(t)}},function(t,e,n){"use strict";var r=n(1).a.Symbol;e.a=r},function(t,e,n){"use strict";var r=n(37),o=n(26);e.a=function(t){return null!=t&&Object(o.a)(t.length)&&!Object(r.a)(t)}},function(t,e,n){"use strict";var r=n(37),o=n(1).a["__core-js_shared__"],i=function(){var t=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var a=function(t){return!!i&&i in t},c=n(2),u=n(13),s=/^\[object .+?Constructor\]$/,f=Function.prototype,l=Object.prototype,y=f.toString,p=l.hasOwnProperty,b=RegExp("^"+y.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var v=function(t){return!(!Object(c.a)(t)||a(t))&&(Object(r.a)(t)?b:s).test(Object(u.a)(t))};var h=function(t,e){return null==t?void 0:t[e]};e.a=function(t,e){var n=h(t,e);return v(n)?n:void 0}},function(t,e,n){"use strict";var r=n(7),o=n(1),i=Object(r.a)(o.a,"DataView"),a=n(21),c=Object(r.a)(o.a,"Promise"),u=n(23),s=Object(r.a)(o.a,"WeakMap"),f=n(9),l=n(13),y=Object(l.a)(i),p=Object(l.a)(a.a),b=Object(l.a)(c),v=Object(l.a)(u.a),h=Object(l.a)(s),d=f.a;(i&&"[object DataView]"!=d(new i(new ArrayBuffer(1)))||a.a&&"[object Map]"!=d(new a.a)||c&&"[object Promise]"!=d(c.resolve())||u.a&&"[object Set]"!=d(new u.a)||s&&"[object WeakMap]"!=d(new s))&&(d=function(t){var e=Object(f.a)(t),n="[object Object]"==e?t.constructor:void 0,r=n?Object(l.a)(n):"";if(r)switch(r){case y:return"[object DataView]";case p:return"[object Map]";case b:return"[object Promise]";case v:return"[object Set]";case h:return"[object WeakMap]"}return e});e.a=d},function(t,e,n){"use strict";var r=n(5),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,c=r.a?r.a.toStringTag:void 0;var u=function(t){var e=i.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[c]=n:delete t[c]),o},s=Object.prototype.toString;var f=function(t){return s.call(t)},l="[object Null]",y="[object Undefined]",p=r.a?r.a.toStringTag:void 0;e.a=function(t){return null==t?void 0===t?y:l:p&&p in Object(t)?u(t):f(t)}},function(t,e,n){"use strict";var r=n(25),o=n(14);var i=function(t,e){return Object(o.a)(e,function(e){return[e,t[e]]})},a=n(8),c=n(38);var u=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n},s="[object Map]",f="[object Set]";var l=function(t){return function(e){var n=Object(a.a)(e);return n==s?Object(c.a)(e):n==f?u(e):i(e,t(e))}}(n(4).a);var y=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r},p=n(30),b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var v={isPromise:function(t){return t&&"function"==typeof t.then},denodify:function(t,e){return function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return new Promise(function(n,o){t[e].apply(t,r.concat(function(t,e){t?o(t):n(e)}))})}},props:function(t){var e=l(t);return Promise.all(Object(r.a)(e,function(t){return t[1]})).then(function(t){var n=t.reduce(function(t,n,r){return t[r]=[e[r][0],n],t},[]);return y(n)})},pending:function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t},try:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return 1===n.length&&Array.isArray(n[0])&&(n=n[0]),new Promise(function(e,r){var o=t.apply(void 0,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(n));v.isPromise(o)||(o=Promise.resolve(o)),o.then(e,r)})},delayRetry:function(){var t={maxRetryCount:5};return function(e,n,r){var o=v.pending();if(r&&r.canceled)o.reject(r.lastTimeFailedReason);else{e="function"==typeof e?e:function(){},r=r||{retriedTimes:0,lastOutSecond:.1,canceled:!1,lastTimeFailedReason:null};var i=b({},t,n);v.try(e,r.retriedTimes+1).catch(function(t){return r.lastTimeFailedReason=t,r.retriedTimes>=i.maxRetryCount||r.canceled?Promise.reject(t):(r.retriedTimes+=1,r.lastOutSecond=r.lastOutSecond*(r.retriedTimes%2?10:3),new Promise(function(t,n){setTimeout(function(){v.delayRetry(e,i,r).promise.then(t,n)},1e3*r.lastOutSecond)}))}).then(o.resolve,o.reject)}return{promise:o.promise,isCanceled:function(){return r.canceled},triedTimes:function(){return r.retriedTimes},cancel:function(){null==r.lastTimeFailedReason?o.reject():o.reject(r.lastTimeFailedReason),r.canceled=!0}}}}(),parseValidDate:function(t){if(!t)return null;var e=void 0;return e="[object Date]"===Object.prototype.toString.call(t)?t:Object(p.a)(t)&&/^\d+$/.test(t)?new Date(parseInt(t,10)):new Date(t),isNaN(e.getTime())?null:e}};e.a=v},function(t,e,n){"use strict";(function(t){var r=n(1),o=n(53),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a="object"==("undefined"==typeof exports?"undefined":i(exports))&&exports&&!exports.nodeType&&exports,c=a&&"object"==i(t)&&t&&!t.nodeType&&t,u=c&&c.exports===a?r.a.Buffer:void 0,s=(u?u.isBuffer:void 0)||o.a;e.a=s}).call(this,n(50)(t))},function(t,e,n){"use strict";(function(t){var r=n(36),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="object"==("undefined"==typeof exports?"undefined":o(exports))&&exports&&!exports.nodeType&&exports,a=i&&"object"==o(t)&&t&&!t.nodeType&&t,c=a&&a.exports===i&&r.a.process,u=function(){try{var t=a&&a.require&&a.require("util").types;return t||c&&c.binding&&c.binding("util")}catch(t){}}();e.a=u}).call(this,n(50)(t))},function(t,e,n){"use strict";var r=Function.prototype.toString;e.a=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){"use strict";var r=Object.prototype;e.a=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},function(t,e,n){"use strict";var r=n(9),o=n(3),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a="[object Symbol]";e.a=function(t){return"symbol"==(void 0===t?"undefined":i(t))||Object(o.a)(t)&&Object(r.a)(t)==a}},function(t,e,n){"use strict";e.a=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){"use strict";var r=n(22),o=n(47),i=n(41),a=n(42),c=1,u=2;var s=function(t,e,n,r,s,f){var l=n&c,y=t.length,p=e.length;if(y!=p&&!(l&&p>y))return!1;var b=f.get(t);if(b&&f.get(e))return b==e;var v=-1,h=!0,d=n&u?new o.a:void 0;for(f.set(t,e),f.set(e,t);++v<y;){var j=t[v],O=e[v];if(r)var m=l?r(O,j,v,e,t,f):r(j,O,v,t,e,f);if(void 0!==m){if(m)continue;h=!1;break}if(d){if(!Object(i.a)(e,function(t,e){if(!Object(a.a)(d,e)&&(j===t||s(j,t,n,r,f)))return d.push(e)})){h=!1;break}}else if(j!==O&&!s(j,O,n,r,f)){h=!1;break}}return f.delete(t),f.delete(e),h},f=n(5),l=n(34),y=n(17),p=n(38),b=n(29),v=1,h=2,d="[object Boolean]",j="[object Date]",O="[object Error]",m="[object Map]",g="[object Number]",_="[object RegExp]",S="[object Set]",w="[object String]",T="[object Symbol]",A="[object ArrayBuffer]",k="[object DataView]",P=f.a?f.a.prototype:void 0,E=P?P.valueOf:void 0;var x=function(t,e,n,r,o,i,a){switch(n){case k:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case A:return!(t.byteLength!=e.byteLength||!i(new l.a(t),new l.a(e)));case d:case j:case g:return Object(y.a)(+t,+e);case O:return t.name==e.name&&t.message==e.message;case _:case w:return t==e+"";case m:var c=p.a;case S:var u=r&v;if(c||(c=b.a),t.size!=e.size&&!u)return!1;var f=a.get(t);if(f)return f==e;r|=h,a.set(t,e);var P=s(c(t),c(e),r,o,i,a);return a.delete(t),P;case T:if(E)return E.call(t)==E.call(e)}return!1},I=n(35),R=1,D=Object.prototype.hasOwnProperty;var z=function(t,e,n,r,o,i){var a=n&R,c=Object(I.a)(t),u=c.length;if(u!=Object(I.a)(e).length&&!a)return!1;for(var s=u;s--;){var f=c[s];if(!(a?f in e:D.call(e,f)))return!1}var l=i.get(t);if(l&&i.get(e))return l==e;var y=!0;i.set(t,e),i.set(e,t);for(var p=a;++s<u;){var b=t[f=c[s]],v=e[f];if(r)var h=a?r(v,b,f,e,t,i):r(b,v,f,t,e,i);if(!(void 0===h?b===v||o(b,v,n,r,i):h)){y=!1;break}p||(p="constructor"==f)}if(y&&!p){var d=t.constructor,j=e.constructor;d!=j&&"constructor"in t&&"constructor"in e&&!("function"==typeof d&&d instanceof d&&"function"==typeof j&&j instanceof j)&&(y=!1)}return i.delete(t),i.delete(e),y},C=n(8),L=n(0),F=n(11),M=n(32),N=1,U="[object Arguments]",V="[object Array]",$="[object Object]",B=Object.prototype.hasOwnProperty;var q=function(t,e,n,o,i,a){var c=Object(L.a)(t),u=Object(L.a)(e),f=c?V:Object(C.a)(t),l=u?V:Object(C.a)(e),y=(f=f==U?$:f)==$,p=(l=l==U?$:l)==$,b=f==l;if(b&&Object(F.a)(t)){if(!Object(F.a)(e))return!1;c=!0,y=!1}if(b&&!y)return a||(a=new r.a),c||Object(M.a)(t)?s(t,e,n,o,i,a):x(t,e,f,n,o,i,a);if(!(n&N)){var v=y&&B.call(t,"__wrapped__"),h=p&&B.call(e,"__wrapped__");if(v||h){var d=v?t.value():t,j=h?e.value():e;return a||(a=new r.a),i(d,j,n,o,a)}}return!!b&&(a||(a=new r.a),z(t,e,n,o,i,a))},W=n(3);var G=function t(e,n,r,o,i){return e===n||(null==e||null==n||!Object(W.a)(e)&&!Object(W.a)(n)?e!=e&&n!=n:q(e,n,r,o,t,i))},J=1,H=2;var K=function(t,e,n,o){var i=n.length,a=i,c=!o;if(null==t)return!a;for(t=Object(t);i--;){var u=n[i];if(c&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++i<a;){var s=(u=n[i])[0],f=t[s],l=u[1];if(c&&u[2]){if(void 0===f&&!(s in t))return!1}else{var y=new r.a;if(o)var p=o(f,l,s,t,e,y);if(!(void 0===p?G(l,f,J|H,o,y):p))return!1}}return!0},Q=n(2);var X=function(t){return t==t&&!Object(Q.a)(t)},Y=n(4);var Z=function(t){for(var e=Object(Y.a)(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,X(o)]}return e};var tt=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}};var et=function(t){var e=Z(t);return 1==e.length&&e[0][2]?tt(e[0][0],e[0][1]):function(n){return n===t||K(n,t,e)}},nt=n(16),rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,it=/^\w*$/;var at=function(t,e){if(Object(L.a)(t))return!1;var n=void 0===t?"undefined":rt(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Object(nt.a)(t))||it.test(t)||!ot.test(t)||null!=e&&t in Object(e)},ct=n(24),ut="Expected a function";function st(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(ut);var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(st.Cache||ct.a),n}st.Cache=ct.a;var ft=st,lt=500;var yt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pt=/\\(\\)?/g,bt=function(t){var e=ft(t,function(t){return n.size===lt&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(yt,function(t,n,r,o){e.push(r?o.replace(pt,"$1"):n||t)}),e}),vt=n(14),ht=1/0,dt=f.a?f.a.prototype:void 0,jt=dt?dt.toString:void 0;var Ot=function t(e){if("string"==typeof e)return e;if(Object(L.a)(e))return Object(vt.a)(e,t)+"";if(Object(nt.a)(e))return jt?jt.call(e):"";var n=e+"";return"0"==n&&1/e==-ht?"-0":n};var mt=function(t){return null==t?"":Ot(t)};var gt=function(t,e){return Object(L.a)(t)?t:at(t,e)?[t]:bt(mt(t))},_t=1/0;var St=function(t){if("string"==typeof t||Object(nt.a)(t))return t;var e=t+"";return"0"==e&&1/t==-_t?"-0":e};var wt=function(t,e){for(var n=0,r=(e=gt(e,t)).length;null!=t&&n<r;)t=t[St(e[n++])];return n&&n==r?t:void 0};var Tt=function(t,e,n){var r=null==t?void 0:wt(t,e);return void 0===r?n:r};var At=function(t,e){return null!=t&&e in Object(t)},kt=n(31),Pt=n(28),Et=n(26);var xt=function(t,e,n){for(var r=-1,o=(e=gt(e,t)).length,i=!1;++r<o;){var a=St(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&Object(Et.a)(o)&&Object(Pt.a)(a,o)&&(Object(L.a)(t)||Object(kt.a)(t))};var It=function(t,e){return null!=t&&xt(t,e,At)},Rt=1,Dt=2;var zt=function(t,e){return at(t)&&X(e)?tt(St(t),e):function(n){var r=Tt(n,t);return void 0===r&&r===e?It(n,t):G(e,r,Rt|Dt)}},Ct=n(40);var Lt=function(t){return function(e){return null==e?void 0:e[t]}};var Ft=function(t){return function(e){return wt(e,t)}};var Mt=function(t){return at(t)?Lt(St(t)):Ft(t)},Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=function(t){return"function"==typeof t?t:null==t?Ct.a:"object"==(void 0===t?"undefined":Nt(t))?Object(L.a)(t)?zt(t[0],t[1]):et(t):Mt(t)}},function(t,e,n){"use strict";var r=function(){this.__data__=[],this.size=0},o=n(17);var i=function(t,e){for(var n=t.length;n--;)if(Object(o.a)(t[n][0],e))return n;return-1},a=Array.prototype.splice;var c=function(t){var e=this.__data__,n=i(e,t);return!(n<0||(n==e.length-1?e.pop():a.call(e,n,1),--this.size,0))};var u=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]};var s=function(t){return i(this.__data__,t)>-1};var f=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=c,l.prototype.get=u,l.prototype.has=s,l.prototype.set=f;e.a=l},function(t,e,n){"use strict";var r=n(46),o=n(6);var i=function(t,e){return function(n,r){if(null==n)return n;if(!Object(o.a)(n))return t(n,r);for(var i=n.length,a=e?i:-1,c=Object(n);(e?a--:++a<i)&&!1!==r(c[a],a,c););return n}}(r.a);e.a=i},function(t,e,n){"use strict";var r=n(7),o=n(1),i=Object(r.a)(o.a,"Map");e.a=i},function(t,e,n){"use strict";var r=n(19);var o=function(){this.__data__=new r.a,this.size=0};var i=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var a=function(t){return this.__data__.get(t)};var c=function(t){return this.__data__.has(t)},u=n(21),s=n(24),f=200;var l=function(t,e){var n=this.__data__;if(n instanceof r.a){var o=n.__data__;if(!u.a||o.length<f-1)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new s.a(o)}return n.set(t,e),this.size=n.size,this};function y(t){var e=this.__data__=new r.a(t);this.size=e.size}y.prototype.clear=o,y.prototype.delete=i,y.prototype.get=a,y.prototype.has=c,y.prototype.set=l;e.a=y},function(t,e,n){"use strict";var r=n(7),o=n(1),i=Object(r.a)(o.a,"Set");e.a=i},function(t,e,n){"use strict";var r=n(7),o=Object(r.a)(Object,"create");var i=function(){this.__data__=o?o(null):{},this.size=0};var a=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},c="__lodash_hash_undefined__",u=Object.prototype.hasOwnProperty;var s=function(t){var e=this.__data__;if(o){var n=e[t];return n===c?void 0:n}return u.call(e,t)?e[t]:void 0},f=Object.prototype.hasOwnProperty;var l=function(t){var e=this.__data__;return o?void 0!==e[t]:f.call(e,t)},y="__lodash_hash_undefined__";var p=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=o&&void 0===e?y:e,this};function b(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}b.prototype.clear=i,b.prototype.delete=a,b.prototype.get=s,b.prototype.has=l,b.prototype.set=p;var v=b,h=n(19),d=n(21);var j=function(){this.size=0,this.__data__={hash:new v,map:new(d.a||h.a),string:new v}},O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var m=function(t){var e=void 0===t?"undefined":O(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var g=function(t,e){var n=t.__data__;return m(e)?n["string"==typeof e?"string":"hash"]:n.map};var _=function(t){var e=g(this,t).delete(t);return this.size-=e?1:0,e};var S=function(t){return g(this,t).get(t)};var w=function(t){return g(this,t).has(t)};var T=function(t,e){var n=g(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function A(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}A.prototype.clear=j,A.prototype.delete=_,A.prototype.get=S,A.prototype.has=w,A.prototype.set=T;e.a=A},function(t,e,n){"use strict";var r=n(14),o=n(18),i=n(20),a=n(6);var c=function(t,e){var n=-1,r=Object(a.a)(t)?Array(t.length):[];return Object(i.a)(t,function(t,o,i){r[++n]=e(t,o,i)}),r},u=n(0);e.a=function(t,e){return(Object(u.a)(t)?r.a:c)(t,Object(o.a)(e,3))}},function(t,e,n){"use strict";var r=9007199254740991;e.a=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}},function(t,e,n){"use strict";e.a=function(t){return function(e){return t(e)}}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=9007199254740991,i=/^(?:0|[1-9]\d*)$/;e.a=function(t,e){var n=void 0===t?"undefined":r(t);return!!(e=null==e?o:e)&&("number"==n||"symbol"!=n&&i.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){"use strict";e.a=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){"use strict";var r=n(9),o=n(0),i=n(3),a="[object String]";e.a=function(t){return"string"==typeof t||!Object(o.a)(t)&&Object(i.a)(t)&&Object(r.a)(t)==a}},function(t,e,n){"use strict";var r=n(9),o=n(3),i="[object Arguments]";var a=function(t){return Object(o.a)(t)&&Object(r.a)(t)==i},c=Object.prototype,u=c.hasOwnProperty,s=c.propertyIsEnumerable,f=a(function(){return arguments}())?a:function(t){return Object(o.a)(t)&&u.call(t,"callee")&&!s.call(t,"callee")};e.a=f},function(t,e,n){"use strict";var r=n(9),o=n(26),i=n(3),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var c=function(t){return Object(i.a)(t)&&Object(o.a)(t.length)&&!!a[Object(r.a)(t)]},u=n(27),s=n(12),f=s.a&&s.a.isTypedArray,l=f?Object(u.a)(f):c;e.a=l},function(t,e,n){"use strict";var r=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i},o=n(45),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,c=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return i.call(t,e)}))}:o.a;e.a=c},function(t,e,n){"use strict";var r=n(1).a.Uint8Array;e.a=r},function(t,e,n){"use strict";var r=n(43),o=n(33),i=n(4);e.a=function(t){return Object(r.a)(t,i.a,o.a)}},function(t,e,n){"use strict";(function(t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="object"==(void 0===t?"undefined":n(t))&&t&&t.Object===Object&&t;e.a=r}).call(this,n(51))},function(t,e,n){"use strict";var r=n(9),o=n(2),i="[object AsyncFunction]",a="[object Function]",c="[object GeneratorFunction]",u="[object Proxy]";e.a=function(t){if(!Object(o.a)(t))return!1;var e=Object(r.a)(t);return e==a||e==c||e==i||e==u}},function(t,e,n){"use strict";e.a=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e,n){"use strict";e.a=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){"use strict";e.a=function(t,e){return t.has(e)}},function(t,e,n){"use strict";var r=n(44),o=n(0);e.a=function(t,e,n){var i=e(t);return Object(o.a)(t)?i:Object(r.a)(i,n(t))}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){"use strict";e.a=function(){return[]}},function(t,e,n){"use strict";var r=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),c=a.length;c--;){var u=a[t?c:++o];if(!1===n(i[u],u,i))break}return e}}(),o=n(4);e.a=function(t,e){return t&&r(t,e,o.a)}},function(t,e,n){"use strict";var r=n(24),o="__lodash_hash_undefined__";var i=function(t){return this.__data__.set(t,o),this};var a=function(t){return this.__data__.has(t)};function c(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r.a;++e<n;)this.add(t[e])}c.prototype.add=c.prototype.push=i,c.prototype.has=a;e.a=c},function(t,e,n){"use strict";var r=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},o=n(31),i=n(0),a=n(11),c=n(28),u=n(32),s=Object.prototype.hasOwnProperty;e.a=function(t,e){var n=Object(i.a)(t),f=!n&&Object(o.a)(t),l=!n&&!f&&Object(a.a)(t),y=!n&&!f&&!l&&Object(u.a)(t),p=n||f||l||y,b=p?r(t.length,String):[],v=b.length;for(var h in t)!e&&!s.call(t,h)||p&&("length"==h||l&&("offset"==h||"parent"==h)||y&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Object(c.a)(h,v))||b.push(h);return b}},function(t,e,n){"use strict";var r=n(15),o=n(39),i=Object(o.a)(Object.keys,Object),a=Object.prototype.hasOwnProperty;e.a=function(t){if(!Object(r.a)(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r;
/*!
 * EventEmitter v5.1.0 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */!function(e){"use strict";function o(){}var i=o.prototype,a=e.EventEmitter;function c(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function u(t){return function(){return this[t].apply(this,arguments)}}i.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp)for(n in e={},r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n]);else e=r[t]||(r[t]=[]);return e},i.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},i.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},i.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&t(e.listener)}(e))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(t),o="object"==typeof e;for(n in r)r.hasOwnProperty(n)&&-1===c(r[n],e)&&r[n].push(o?e:{listener:e,once:!1});return this},i.on=u("addListener"),i.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},i.once=u("addOnceListener"),i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,e){var n,r,o=this.getListenersAsObject(t);for(r in o)o.hasOwnProperty(r)&&-1!==(n=c(o[r],e))&&o[r].splice(n,1);return this},i.off=u("removeListener"),i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,n){var r,o,i=t?this.removeListener:this.addListener,a=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=n.length;r--;)i.call(this,e,n[r]);else for(r in e)e.hasOwnProperty(r)&&(o=e[r])&&("function"==typeof o?i.call(this,r,o):a.call(this,r,o));return this},i.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},i.removeAllListeners=u("removeEvent"),i.emitEvent=function(t,e){var n,r,o,i,a=this.getListenersAsObject(t);for(i in a)if(a.hasOwnProperty(i))for(n=a[i].slice(0),o=0;o<n.length;o++)!0===(r=n[o]).once&&this.removeListener(t,r.listener),r.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},i.trigger=u("emitEvent"),i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},i.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return e.EventEmitter=a,o},void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}(this||{})},function(t,e,n){"use strict";e.a=function(){return!1}},function(t,e,n){"use strict";(function(t){var r=n(55),o=n(56),i=n(10),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var c=void 0;try{c=window||t||{}}catch(t){c={}}var u={canStartSyncNow:function(t,e){e(null,!0)},sendRequest:function(t,e,n){n(null,{config:e,status:200,headers:{},data:{}})},getDataToSync:function(t,e){e(null)},getAllDataToSync:function(t,e){e(null)},getItems:function(t,e,n){n(null,[])},updateLocalData:function(t,e,n){n(null)},deserializeItem:function(t,e,n,r,o,i,a){var c=void 0;switch(n){case"change":case"new":c=i;break;default:c=o||r}a(null,c)},call:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return i.a.denodify(this,t).apply(void 0,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(n))}};e.a=a({apiPrefix:"https://api-ng.pomotodo.com",debounce:5e3,blockRetryInterval:5e3,logger:new r.a,storage:c.localStorage||new o.a,autoBackgroundCompletelySync:!0,autoRetryRequestCount:5},u)}).call(this,n(51))},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.option=r({},this.constructor.defaultOption,e),this.logs=[],this.errors=[]}return o(t,[{key:"log",value:function(){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];this.option.print&&(t=console).log.apply(t,n),this.logs.push(n)}},{key:"error",value:function(){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];this.option.print&&(t=console).error.apply(t,n),this.errors.push(n)}}]),t}();i.defaultOption={print:!0},e.a=i},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.store={}}return r(t,[{key:"key",value:function(t){return Object.keys(this.store)[t]}},{key:"getItem",value:function(t){return this.store[t]}},{key:"setItem",value:function(t,e){this.store[t]=e}},{key:"removeItem",value:function(t){delete this.store[t]}},{key:"clear",value:function(){this.store={}}},{key:"length",get:function(){return Object.keys(this.store).length}}]),t}();e.a=o},function(t,e,n){"use strict";(function(t){var r=n(1),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i="object"==("undefined"==typeof exports?"undefined":o(exports))&&exports&&!exports.nodeType&&exports,a=i&&"object"==o(t)&&t&&!t.nodeType&&t,c=a&&a.exports===i?r.a.Buffer:void 0,u=c?c.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,r=u?u(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(50)(t))},function(t,e,n){t.exports=n(59)},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"SyncFailedError",function(){return l}),n.d(r,"ResponseEntityEmptyError",function(){return y}),n.d(r,"TimeoutError",function(){return p});var o=n(52),i=n.n(o),a=n(10),c=n(54);function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=function(t){function e(t){u(this,e);var n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.response=t,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(n,n.constructor),n.name="SyncFailedError",n.message="Sync failed",n}return f(e,Error),e}(),y=function(t){function e(t){u(this,e);var n=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.response=t,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(n,n.constructor),n.name="ResponseEntityEmptyError",n.message="Response entity is empty",n}return f(e,Error),e}(),p=function(t){function e(){u(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(t,t.constructor),t.name="TimeoutError",t.message="timeout",t}return f(e,Error),e}(),b=n(47);var v=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1};var h=function(t){return t!=t};var d=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1};var j=function(t,e,n){return e==e?d(t,e,n):v(t,h,n)};var O=function(t,e){return!(null==t||!t.length)&&j(t,e,0)>-1};var m=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1},g=n(42),_=n(23);var S=function(){},w=n(29),T=_.a&&1/Object(w.a)(new _.a([,-0]))[1]==1/0?function(t){return new _.a(t)}:S,A=200;var k=function(t,e,n){var r=-1,o=O,i=t.length,a=!0,c=[],u=c;if(n)a=!1,o=m;else if(i>=A){var s=e?null:T(t);if(s)return Object(w.a)(s);a=!1,o=g.a,u=new b.a}else u=e?[]:c;t:for(;++r<i;){var f=t[r],l=e?e(f):f;if(f=n||0!==f?f:0,a&&l==l){for(var y=u.length;y--;)if(u[y]===l)continue t;e&&u.push(l),c.push(f)}else o(u,l,n)||(u!==c&&u.push(l),c.push(f))}return c};var P=function(t){return t&&t.length?k(t):[]},E=n(4),x=n(14);var I=function(t,e){return Object(x.a)(e,function(e){return t[e]})};var R=function(t){return null==t?[]:I(t,Object(E.a)(t))},D=n(6),z=n(30),C=n(2),L=n(16),F=NaN,M=/^\s+|\s+$/g,N=/^[-+]0x[0-9a-f]+$/i,U=/^0b[01]+$/i,V=/^0o[0-7]+$/i,$=parseInt;var B=function(t){if("number"==typeof t)return t;if(Object(L.a)(t))return F;if(Object(C.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(C.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(M,"");var n=U.test(t);return n||V.test(t)?$(t.slice(2),n?2:8):N.test(t)?F:+t},q=1/0,W=1.7976931348623157e308;var G=function(t){return t?(t=B(t))===q||t===-q?(t<0?-1:1)*W:t==t?t:0:0===t?t:0};var J=function(t){var e=G(t),n=e%1;return e==e?n?e-n:e:0},H=Math.max;var K=function(t,e,n,r){t=Object(D.a)(t)?t:R(t),n=n&&!r?J(n):0;var o=t.length;return n<0&&(n=H(o+n,0)),Object(z.a)(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&j(t,e,n)>-1};var Q=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},X=n(20),Y=n(40);var Z=function(t){return"function"==typeof t?t:Y.a},tt=n(0);var et=function(t,e){return(Object(tt.a)(t)?Q:X.a)(t,Z(e))},nt=n(25),rt=n(49),ot=n(8),it=n(31),at=n(11),ct=n(15),ut=n(32),st="[object Map]",ft="[object Set]",lt=Object.prototype.hasOwnProperty;var yt=function(t){if(null==t)return!0;if(Object(D.a)(t)&&(Object(tt.a)(t)||"string"==typeof t||"function"==typeof t.splice||Object(at.a)(t)||Object(ut.a)(t)||Object(it.a)(t)))return!t.length;var e=Object(ot.a)(t);if(e==st||e==ft)return!t.size;if(Object(ct.a)(t))return!Object(rt.a)(t).length;for(var n in t)if(lt.call(t,n))return!1;return!0},pt=n(41),bt=n(18);var vt=function(t,e){var n;return Object(X.a)(t,function(t,r,o){return!(n=e(t,r,o))}),!!n},ht=n(17),dt=n(28),jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var Ot=function(t,e,n){if(!Object(C.a)(n))return!1;var r=void 0===e?"undefined":jt(e);return!!("number"==r?Object(D.a)(n)&&Object(dt.a)(e,n.length):"string"==r&&e in n)&&Object(ht.a)(n[e],t)};var mt=function(t,e,n){var r=Object(tt.a)(t)?pt.a:vt;return n&&Ot(t,e,n)&&(e=void 0),r(t,Object(bt.a)(e,3))};var gt=function(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n};var _t=function(t,e,n,r,o){return o(t,function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)}),n};var St=function(t,e,n){var r=Object(tt.a)(t)?gt:_t,o=arguments.length<3;return r(t,Object(bt.a)(e,4),n,o,X.a)},wt=n(7),Tt=function(){try{var t=Object(wt.a)(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var At=function(t,e,n){"__proto__"==e&&Tt?Tt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},kt=n(46);var Pt=function(t,e){var n={};return e=Object(bt.a)(e,3),Object(kt.a)(t,function(t,r,o){At(n,r,e(t,r,o))}),n},Et=n(22),xt=Object.prototype.hasOwnProperty;var It=function(t,e,n){var r=t[e];xt.call(t,e)&&Object(ht.a)(r,n)&&(void 0!==n||e in t)||At(t,e,n)};var Rt=function(t,e,n,r){var o=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var c=e[i],u=r?r(n[c],t[c],c,n,t):void 0;void 0===u&&(u=t[c]),o?At(n,c,u):It(n,c,u)}return n};var Dt=function(t,e){return t&&Rt(e,Object(E.a)(e),t)},zt=n(48);var Ct=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},Lt=Object.prototype.hasOwnProperty;var Ft=function(t){if(!Object(C.a)(t))return Ct(t);var e=Object(ct.a)(t),n=[];for(var r in t)("constructor"!=r||!e&&Lt.call(t,r))&&n.push(r);return n};var Mt=function(t){return Object(D.a)(t)?Object(zt.a)(t,!0):Ft(t)};var Nt=function(t,e){return t&&Rt(e,Mt(e),t)},Ut=n(57);var Vt=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},$t=n(33);var Bt=function(t,e){return Rt(t,Object($t.a)(t),e)},qt=n(44),Wt=n(39),Gt=Object(Wt.a)(Object.getPrototypeOf,Object),Jt=n(45),Ht=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Object(qt.a)(e,Object($t.a)(t)),t=Gt(t);return e}:Jt.a;var Kt=function(t,e){return Rt(t,Ht(t),e)},Qt=n(35),Xt=n(43);var Yt=function(t){return Object(Xt.a)(t,Mt,Ht)},Zt=Object.prototype.hasOwnProperty;var te=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Zt.call(t,"index")&&(n.index=t.index,n.input=t.input),n},ee=n(34);var ne=function(t){var e=new t.constructor(t.byteLength);return new ee.a(e).set(new ee.a(t)),e};var re=function(t,e){var n=e?ne(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},oe=/\w*$/;var ie=function(t){var e=new t.constructor(t.source,oe.exec(t));return e.lastIndex=t.lastIndex,e},ae=n(5),ce=ae.a?ae.a.prototype:void 0,ue=ce?ce.valueOf:void 0;var se=function(t){return ue?Object(ue.call(t)):{}};var fe=function(t,e){var n=e?ne(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},le="[object Boolean]",ye="[object Date]",pe="[object Map]",be="[object Number]",ve="[object RegExp]",he="[object Set]",de="[object String]",je="[object Symbol]",Oe="[object ArrayBuffer]",me="[object DataView]",ge="[object Float32Array]",_e="[object Float64Array]",Se="[object Int8Array]",we="[object Int16Array]",Te="[object Int32Array]",Ae="[object Uint8Array]",ke="[object Uint8ClampedArray]",Pe="[object Uint16Array]",Ee="[object Uint32Array]";var xe=function(t,e,n){var r=t.constructor;switch(e){case Oe:return ne(t);case le:case ye:return new r(+t);case me:return re(t,n);case ge:case _e:case Se:case we:case Te:case Ae:case ke:case Pe:case Ee:return fe(t,n);case pe:return new r;case be:case de:return new r(t);case ve:return ie(t);case he:return new r;case je:return se(t)}},Ie=Object.create,Re=function(){function t(){}return function(e){if(!Object(C.a)(e))return{};if(Ie)return Ie(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var De=function(t){return"function"!=typeof t.constructor||Object(ct.a)(t)?{}:Re(Gt(t))},ze=n(3),Ce="[object Map]";var Le=function(t){return Object(ze.a)(t)&&Object(ot.a)(t)==Ce},Fe=n(27),Me=n(12),Ne=Me.a&&Me.a.isMap,Ue=Ne?Object(Fe.a)(Ne):Le,Ve="[object Set]";var $e=function(t){return Object(ze.a)(t)&&Object(ot.a)(t)==Ve},Be=Me.a&&Me.a.isSet,qe=Be?Object(Fe.a)(Be):$e,We=1,Ge=2,Je=4,He="[object Arguments]",Ke="[object Function]",Qe="[object GeneratorFunction]",Xe="[object Object]",Ye={};Ye[He]=Ye["[object Array]"]=Ye["[object ArrayBuffer]"]=Ye["[object DataView]"]=Ye["[object Boolean]"]=Ye["[object Date]"]=Ye["[object Float32Array]"]=Ye["[object Float64Array]"]=Ye["[object Int8Array]"]=Ye["[object Int16Array]"]=Ye["[object Int32Array]"]=Ye["[object Map]"]=Ye["[object Number]"]=Ye[Xe]=Ye["[object RegExp]"]=Ye["[object Set]"]=Ye["[object String]"]=Ye["[object Symbol]"]=Ye["[object Uint8Array]"]=Ye["[object Uint8ClampedArray]"]=Ye["[object Uint16Array]"]=Ye["[object Uint32Array]"]=!0,Ye["[object Error]"]=Ye[Ke]=Ye["[object WeakMap]"]=!1;var Ze=function t(e,n,r,o,i,a){var c,u=n&We,s=n&Ge,f=n&Je;if(r&&(c=i?r(e,o,i,a):r(e)),void 0!==c)return c;if(!Object(C.a)(e))return e;var l=Object(tt.a)(e);if(l){if(c=te(e),!u)return Vt(e,c)}else{var y=Object(ot.a)(e),p=y==Ke||y==Qe;if(Object(at.a)(e))return Object(Ut.a)(e,u);if(y==Xe||y==He||p&&!i){if(c=s||p?{}:De(e),!u)return s?Kt(e,Nt(c,e)):Bt(e,Dt(c,e))}else{if(!Ye[y])return i?e:{};c=xe(e,y,u)}}a||(a=new Et.a);var b=a.get(e);if(b)return b;if(a.set(e,c),qe(e))return e.forEach(function(o){c.add(t(o,n,r,o,e,a))}),c;if(Ue(e))return e.forEach(function(o,i){c.set(i,t(o,n,r,i,e,a))}),c;var v=f?s?Yt:Qt.a:s?keysIn:E.a,h=l?void 0:v(e);return Q(h||e,function(o,i){h&&(o=e[i=o]),It(c,i,t(o,n,r,i,e,a))}),c},tn=1,en=4;var nn=function(t){return Ze(t,tn|en)};var rn=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var i=t[e];i&&(o[r++]=i)}return o},on=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),an=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var cn=function(t,e,n){return t[n]="todo_order"===n?[]:P((t[n]||[]).concat(Object(E.a)(e))),t},un=function(t){if(!Array.isArray(t))return t;var e=rn(Object(nt.a)(t,"timeout")),n=e.length?Math.min.apply(Math,e):void 0,r=rn(Object(nt.a)(t,"syncAllData")),o=mt(r);return an({},Object.assign.apply(Object,[{}].concat(t)),{timeout:n,syncAllData:o})},sn=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.initOption=an({},e.defaultOption,t),n.initOption.apiPrefix=n.initOption.apiPrefix.replace(/\/$/,""),n._nextSync=[],n._currentSync=[],n._syncCallbacks=[],n._doDebounceTimer=null,n._autoSwitchStatusTimer=null,n._doSyncRetryInfo=null,n.backgroundInitializeCompletelySyncSucceed&&n.trigger("backgroundInitializeCompletelySyncSucceed"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.a),on(e,[{key:"cleanStoragedStatus",value:function(t){var e={lastSuccessTime:"ds_localdb_last_sync",lastFailTime:"app_last_sync_failed_time",backgroundInitializeCompletelySyncSucceed:"ds_localdb_init_completely_synced"};null==t?R(e).forEach(this.initOption.storage.removeItem.bind(this.initOption.storage)):null!=e[t]&&this.initOption.storage.removeItem(e[t])}},{key:"do",value:function(t,e,n){var r=this;if(!t)throw new Error("[Thinker] reason is required");var o=this.initOption.debounce;e&&null!=e.debounce&&(o=e.debounce);var i=[void 0,"waiting","succeed","failed"];K(i.concat(["preparing","blocking"]),this.status)?(K(i,this.status)?(this._changeStatus("preparing"),clearTimeout(this._autoSwitchStatusTimer),this._autoSwitchStatusTimer=null):clearTimeout(this._doDebounceTimer),this._syncCallbacks.push(n),this._currentSync.push({reason:t,passInOption:e}),this._doDebounceTimer=setTimeout(function(){clearTimeout(r._doDebounceTimer),r._doDebounceTimer=null,r._intoSync()},o)):(this._syncCallbacks.push(n),this._nextSync.push({reason:t,passInOption:e})),this._doSyncRetryInfo&&this._doSyncRetryInfo.triedTimes()>1&&!this._doSyncRetryInfo.isCanceled()&&this._doSyncRetryInfo.cancel()}},{key:"_intoSync",value:function(){var t=this;this._callSync().then(function(){var e=t._syncCallbacks;t._syncCallbacks=[],t._changeStatus("succeed"),t.initOption.logger.log("[Thinker] succeed"),e.forEach(function(t){return"function"==typeof t&&t()});var n=setTimeout(function(){t._autoSwitchStatusTimer===n&&(t._autoSwitchStatusTimer=null,t._changeStatus("waiting"))},2e3);t._autoSwitchStatusTimer=n},function(e){var n=t._syncCallbacks;t._syncCallbacks=[],t._changeStatus("failed",[e]),t.initOption.logger.log("[Thinker] failed"),n.forEach(function(t){return"function"==typeof t&&t(e)});var r=setTimeout(function(){t._autoSwitchStatusTimer===r&&(t._autoSwitchStatusTimer=null)},2e3);return t._autoSwitchStatusTimer=r,Promise.reject(e)})}},{key:"_callSync",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=Object(nt.a)(this._currentSync,"reason"),r=Object(nt.a)(this._currentSync,"passInOption"),o={passInOptions:r,isFirstTime:null==this.lastSuccessTime},i=un(r),a=function(n){return function(r){return t._tryToStartSecondSync(n,e,r)}};return this._changeStatus("blocking"),this._waitUntilCanSync(o,this.initOption).then(function(){return t._changeStatus("processing"),t.initOption.logger.log("[Thinker] start("+e+"), reasons: \n  - "+n.join("\n  - ")),t._doSync(o,i)}).then(a(!1),a(!0))}},{key:"_tryToStartSecondSync",value:function(t,e,n){return yt(this._nextSync)?(this._currentSync=[],t?Promise.reject(n):n):(this._currentSync=this._nextSync,this._nextSync=[],this._callSync(e+1))}},{key:"_waitUntilCanSync",value:function(t,e){var n=a.a.pending();return function r(){e.call("canStartSyncNow",t).then(function(t){if(!0===t)n.resolve();else{var o=Object(z.a)(t)?t:"some reason";e.logger.log("[Thinker] sync blocked by "+o+", will try again after "+e.blockRetryInterval/1e3+" seconds"),setTimeout(r,e.blockRetryInterval)}}).catch(n.reject)}(),n.promise}},{key:"_changeStatus",value:function(t,e){this.status=t,this.trigger(t,e),this.trigger("statusChange",[t].concat(e))}},{key:"_doSync",value:function(t,e){var n=this,r=a.a.pending(),o=e.syncAllData?"getAllDataToSync":"getDataToSync",i=void 0,c=!1;return null!=e.timeout?i=e.timeout:e.syncAllData||null==this.initOption.timeout?e.syncAllData&&null!=this.initOption.syncAllDataTimeout&&(i=this.initOption.syncAllDataTimeout):i=this.initOption.timeout,null!=i&&setTimeout(function(){c=!0,r.reject(new p)},i),this.initOption.call(o,t).then(function(r){if(!c)return n._sendSyncRequest(t,e,r)}).then(function(e){if(!c)return n._updateLocalData(t,e)}).then(function(t){if(!c){var e=a.a.parseValidDate(t.data.last_sync)||new Date;return n.initOption.storage.setItem("ds_localdb_last_sync",e.getTime()),n.initOption.storage.removeItem("app_last_sync_failed_time"),t}},function(t){if(!c)return n.initOption.storage.setItem("app_last_sync_failed_time",(new Date).getTime()),Promise.reject(t)}).then(function(r){c||n._tryToTriggerBackgroundInitializeCompletelySync(t,e)}).then(function(t){c||r.resolve(t)},function(t){c||r.reject(t)}),r.promise}},{key:"_tryToTriggerBackgroundInitializeCompletelySync",value:function(t,e){var n=this;if(!this.backgroundSyncing&&!this.backgroundInitializeCompletelySyncSucceed&&!t.background&&this.initOption.autoBackgroundCompletelySync){var r={syncAllData:!0},o={passInOptions:t.passInOptions.concat(r),isFirstTime:!1,background:!0};this.backgroundSyncing=!0,this._doSync(o,r).then(function(){n.backgroundSyncing=!1,n.initOption.storage.setItem("ds_localdb_init_completely_synced","true"),n.trigger("backgroundInitializeCompletelySyncSucceed")},function(t){n.backgroundSyncing=!1})}}},{key:"_sendSyncRequest",value:function(t,e,n){var r=this,o=void 0,i={url:this.initOption.apiPrefix+"/account/sync",method:"POST",data:e.syncAllData?{objects:n}:this.lastSuccessTime?{last_sync:this.lastSuccessTime.toJSON(),objects:n}:{fast_from:new Date(Date.now()-26784e5).toJSON(),objects:{}},params:null},c=function(e){return r.initOption.logger.log("[Thinker] request retry("+e+")",i),r.initOption.call("sendRequest",t,nn(i)).then(function(t){return t.config=i,t},function(t){return r.initOption.logger.error("[Thinker] request failed("+e+")",t),Promise.reject(t)})};return this.initOption.autoRetryRequestCount?(this._doSyncRetryInfo=a.a.delayRetry(c,{maxRetryCount:this.initOption.autoRetryRequestCount}),o=this._doSyncRetryInfo.promise):o=c(1),o.then(function(t){if((t.status>=300||t.status<200)&&507!==t.status)throw new l(t);if(!t.data)throw new y(t);return t})}},{key:"_updateLocalData",value:function(t,e){var n=this,r=e.config.data.objects,o=e.data.objects,i={};return St(r,cn,i),St(o,cn,i),this.initOption.call("getItems",t,i).then(function(c){return a.a.props(Pt(i,function(i,a){var u=r[a],s=c[a],f=o[a];return n._deserializeItem(t,a,i,u,s,f,e)}))}).then(function(e){return et(e,function(t,n){yt(t)?delete e[n]:et(t,function(e,n){yt(e)&&delete t[n]})}),n.initOption.call("updateLocalData",t,e)}).then(function(){return e})}},{key:"_decideAction",value:function(t,e,n,r){var o=t&&t.updated_at?new Date(t.updated_at).valueOf():void 0,i=e&&e.updated_at?new Date(e.updated_at).valueOf():void 0,a=n&&n.updated_at?new Date(n.updated_at).valueOf():void 0;return e?n?i>a?"doNothing":i===a&&r?"doNothing":"update":r?"doNothing":t?i>o?"doNothing":i===o?"cleanDirty":"doNothing":"doNothing":n?"new":"doNothing"}},{key:"_deserializeItem",value:function(t,e,n,r,o,i,c){var u=this;if("todo_order"!==e&&K(c.data.failures,e)){var s=void 0;return null!=r&&(s=St(r,function(t,e,n){return t[n]=o[n]||e,t},{})),Promise.resolve({keepDirty:s||{}})}if("todo_order"===e){var f=K(c.data.failures,"todo_order"),l=this._decideAction(r,o,i,f);return this.initOption.call("deserializeItem",t,e,l,r,o,i).then(function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},l,t)})}var y=St(n,function(n,a){var s=null!=r?r[a]:void 0,f=null!=o?o[a]:void 0,l=null!=i?i[a]:void 0,y=K(c.data.failures,e+":"+a),p=u._decideAction(s,f,l,y);return n[p]||(n[p]={}),n[p][a]=u.initOption.call("deserializeItem",t,e,p,s,f,l),n},{});return a.a.props(St(y,function(t,e,n){return t[n]=a.a.props(e),t},{}))}}]),e}();sn.defaultOption=c.a,sn.mergeSyncOptions=un,function(t){t.prototype.status="waiting",Object.defineProperties(t.prototype,{backgroundInitializeCompletelySyncSucceed:{get:function(){return"true"===this.initOption.storage.getItem("ds_localdb_init_completely_synced")}},lastSuccessTime:{get:function(){return a.a.parseValidDate(this.initOption.storage.getItem("ds_localdb_last_sync"))}},lastFailTime:{get:function(){return a.a.parseValidDate(this.initOption.storage.getItem("app_last_sync_failed_time"))}}})}(sn),et(r,function(t,e){sn[e]=t});e.default=sn}])});
//# sourceMappingURL=main.js.map