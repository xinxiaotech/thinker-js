!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Thinker=e():t.Thinker=e()}(this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=70)}([function(t,e,n){"use strict";var r=Array.isArray;e.a=r},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e,n){"use strict";var r=n(1),o=n.n(r),i=n(44),a="object"==("undefined"==typeof self?"undefined":o()(self))&&self&&self.Object===Object&&self,c=i.a||a||Function("return this")();e.a=c},function(t,e,n){"use strict";var r=n(1),o=n.n(r);e.a=function(t){var e=o()(t);return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";var r=n(1),o=n.n(r);e.a=function(t){return null!=t&&"object"==o()(t)}},function(t,e,n){"use strict";var r=n(57),o=n(56),i=n(7);e.a=function(t){return Object(i.a)(t)?Object(r.a)(t):Object(o.a)(t)}},function(t,e,n){"use strict";var r=n(2).a.Symbol;e.a=r},function(t,e,n){"use strict";var r=n(45),o=n(31);e.a=function(t){return null!=t&&Object(o.a)(t.length)&&!Object(r.a)(t)}},function(t,e,n){"use strict";var r,o=n(45),i=n(2).a["__core-js_shared__"],a=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";var c=function(t){return!!a&&a in t},u=n(3),s=n(16),f=/^\[object .+?Constructor\]$/,l=Function.prototype,p=Object.prototype,b=l.toString,v=p.hasOwnProperty,y=RegExp("^"+b.call(v).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var h=function(t){return!(!Object(u.a)(t)||c(t))&&(Object(o.a)(t)?y:f).test(Object(s.a)(t))};var d=function(t,e){return null==t?void 0:t[e]};e.a=function(t,e){var n=d(t,e);return h(n)?n:void 0}},function(t,e,n){"use strict";var r=n(8),o=n(2),i=Object(r.a)(o.a,"DataView"),a=n(24),c=Object(r.a)(o.a,"Promise"),u=n(26),s=Object(r.a)(o.a,"WeakMap"),f=n(10),l=n(16),p=Object(l.a)(i),b=Object(l.a)(a.a),v=Object(l.a)(c),y=Object(l.a)(u.a),h=Object(l.a)(s),d=f.a;(i&&"[object DataView]"!=d(new i(new ArrayBuffer(1)))||a.a&&"[object Map]"!=d(new a.a)||c&&"[object Promise]"!=d(c.resolve())||u.a&&"[object Set]"!=d(new u.a)||s&&"[object WeakMap]"!=d(new s))&&(d=function(t){var e=Object(f.a)(t),n="[object Object]"==e?t.constructor:void 0,r=n?Object(l.a)(n):"";if(r)switch(r){case p:return"[object DataView]";case b:return"[object Map]";case v:return"[object Promise]";case y:return"[object Set]";case h:return"[object WeakMap]"}return e});e.a=d},function(t,e,n){"use strict";var r=n(6),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,c=r.a?r.a.toStringTag:void 0;var u=function(t){var e=i.call(t,c),n=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[c]=n:delete t[c]),o},s=Object.prototype.toString;var f=function(t){return s.call(t)},l=r.a?r.a.toStringTag:void 0;e.a=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":l&&l in Object(t)?u(t):f(t)}},function(t,e,n){"use strict";var r=n(13),o=n.n(r),i=n(64),a=n.n(i),c=n(29),u=n(17);var s=function(t,e){return Object(u.a)(e,(function(e){return[e,t[e]]}))},f=n(9),l=n(46);var p=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n};var b=function(t){return function(e){var n=Object(f.a)(e);return"[object Map]"==n?Object(l.a)(e):"[object Set]"==n?p(e):s(e,t(e))}}(n(5).a);var v=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r},y=n(35);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j,O={isPromise:function(t){return t&&"function"==typeof t.then},denodify:function(t,e){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return new Promise((function(n,o){t[e].apply(t,r.concat((function(t,e){t?o(t):n(e)})))}))}},props:function(t){var e=b(t);return Promise.all(Object(c.a)(e,(function(t){return t[1]}))).then((function(t){var n=t.reduce((function(t,n,r){return t[r]=[e[r][0],n],t}),[]);return v(n)}))},pending:function(){var t={};return t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),t},try:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return 1===n.length&&Array.isArray(n[0])&&(n=n[0]),new Promise((function(e,r){var o=t.apply(void 0,a()(n));O.isPromise(o)||(o=Promise.resolve(o)),o.then(e,r)}))},delayRetry:(j={maxRetryCount:5},function(t,e,n){var r=O.pending();if(n&&n.canceled)r.reject(n.lastTimeFailedReason);else{t="function"==typeof t?t:function(){},n=n||{retriedTimes:0,lastOutSecond:.1,canceled:!1,lastTimeFailedReason:null};var o=d(d({},j),e);O.try(t,n.retriedTimes+1).catch((function(e){return n.lastTimeFailedReason=e,n.retriedTimes>=o.maxRetryCount||n.canceled?Promise.reject(e):(n.retriedTimes+=1,n.lastOutSecond=n.lastOutSecond*(n.retriedTimes%2?10:3),new Promise((function(e,r){setTimeout((function(){O.delayRetry(t,o,n).promise.then(e,r)}),1e3*n.lastOutSecond)})))})).then(r.resolve,r.reject)}return{promise:r.promise,isCanceled:function(){return n.canceled},triedTimes:function(){return n.retriedTimes},cancel:function(){null==n.lastTimeFailedReason?r.reject():r.reject(n.lastTimeFailedReason),n.canceled=!0}}}),parseValidDate:function(t){return t?(e="[object Date]"===Object.prototype.toString.call(t)?t:Object(y.a)(t)&&/^\d+$/.test(t)?new Date(parseInt(t,10)):new Date(t),isNaN(e.getTime())?null:e):null;var e}};e.a=O},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";(function(t){var r=n(1),o=n.n(r),i=n(2),a=n(65),c="object"==("undefined"==typeof exports?"undefined":o()(exports))&&exports&&!exports.nodeType&&exports,u=c&&"object"==o()(t)&&t&&!t.nodeType&&t,s=u&&u.exports===c?i.a.Buffer:void 0,f=(s?s.isBuffer:void 0)||a.a;e.a=f}).call(this,n(60)(t))},function(t,e,n){"use strict";(function(t){var r=n(1),o=n.n(r),i=n(44),a="object"==("undefined"==typeof exports?"undefined":o()(exports))&&exports&&!exports.nodeType&&exports,c=a&&"object"==o()(t)&&t&&!t.nodeType&&t,u=c&&c.exports===a&&i.a.process,s=function(){try{var t=c&&c.require&&c.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();e.a=s}).call(this,n(60)(t))},function(t,e,n){"use strict";var r=Function.prototype.toString;e.a=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e,n){"use strict";var r=Object.prototype;e.a=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},function(t,e,n){"use strict";var r=n(1),o=n.n(r),i=n(10),a=n(4);e.a=function(t){return"symbol"==o()(t)||Object(a.a)(t)&&"[object Symbol]"==Object(i.a)(t)}},function(t,e,n){"use strict";e.a=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){"use strict";var r=n(1),o=n.n(r),i=n(25),a=n(55),c=n(49),u=n(50);var s=function(t,e,n,r,o,i){var s=1&n,f=t.length,l=e.length;if(f!=l&&!(s&&l>f))return!1;var p=i.get(t);if(p&&i.get(e))return p==e;var b=-1,v=!0,y=2&n?new a.a:void 0;for(i.set(t,e),i.set(e,t);++b<f;){var h=t[b],d=e[b];if(r)var j=s?r(d,h,b,e,t,i):r(h,d,b,t,e,i);if(void 0!==j){if(j)continue;v=!1;break}if(y){if(!Object(c.a)(e,(function(t,e){if(!Object(u.a)(y,e)&&(h===t||o(h,t,n,r,i)))return y.push(e)}))){v=!1;break}}else if(h!==d&&!o(h,d,n,r,i)){v=!1;break}}return i.delete(t),i.delete(e),v},f=n(6),l=n(40),p=n(20),b=n(46),v=n(34),y=f.a?f.a.prototype:void 0,h=y?y.valueOf:void 0;var d=function(t,e,n,r,o,i,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new l.a(t),new l.a(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(p.a)(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var c=b.a;case"[object Set]":var u=1&r;if(c||(c=v.a),t.size!=e.size&&!u)return!1;var f=a.get(t);if(f)return f==e;r|=2,a.set(t,e);var y=s(c(t),c(e),r,o,i,a);return a.delete(t),y;case"[object Symbol]":if(h)return h.call(t)==h.call(e)}return!1},j=n(42),O=Object.prototype.hasOwnProperty;var g=function(t,e,n,r,o,i){var a=1&n,c=Object(j.a)(t),u=c.length;if(u!=Object(j.a)(e).length&&!a)return!1;for(var s=u;s--;){var f=c[s];if(!(a?f in e:O.call(e,f)))return!1}var l=i.get(t);if(l&&i.get(e))return l==e;var p=!0;i.set(t,e),i.set(e,t);for(var b=a;++s<u;){var v=t[f=c[s]],y=e[f];if(r)var h=a?r(y,v,f,e,t,i):r(v,y,f,t,e,i);if(!(void 0===h?v===y||o(v,y,n,r,i):h)){p=!1;break}b||(b="constructor"==f)}if(p&&!b){var d=t.constructor,g=e.constructor;d==g||!("constructor"in t)||!("constructor"in e)||"function"==typeof d&&d instanceof d&&"function"==typeof g&&g instanceof g||(p=!1)}return i.delete(t),i.delete(e),p},_=n(9),m=n(0),w=n(14),S=n(36),P="[object Object]",x=Object.prototype.hasOwnProperty;var A=function(t,e,n,r,o,a){var c=Object(m.a)(t),u=Object(m.a)(e),f=c?"[object Array]":Object(_.a)(t),l=u?"[object Array]":Object(_.a)(e),p=(f="[object Arguments]"==f?P:f)==P,b=(l="[object Arguments]"==l?P:l)==P,v=f==l;if(v&&Object(w.a)(t)){if(!Object(w.a)(e))return!1;c=!0,p=!1}if(v&&!p)return a||(a=new i.a),c||Object(S.a)(t)?s(t,e,n,r,o,a):d(t,e,f,n,r,o,a);if(!(1&n)){var y=p&&x.call(t,"__wrapped__"),h=b&&x.call(e,"__wrapped__");if(y||h){var j=y?t.value():t,O=h?e.value():e;return a||(a=new i.a),o(j,O,n,r,a)}}return!!v&&(a||(a=new i.a),g(t,e,n,r,o,a))},T=n(4);var k=function t(e,n,r,o,i){return e===n||(null==e||null==n||!Object(T.a)(e)&&!Object(T.a)(n)?e!=e&&n!=n:A(e,n,r,o,t,i))};var E=function(t,e,n,r){var o=n.length,a=o,c=!r;if(null==t)return!a;for(t=Object(t);o--;){var u=n[o];if(c&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var s=(u=n[o])[0],f=t[s],l=u[1];if(c&&u[2]){if(void 0===f&&!(s in t))return!1}else{var p=new i.a;if(r)var b=r(f,l,s,t,e,p);if(!(void 0===b?k(l,f,3,r,p):b))return!1}}return!0},D=n(3);var R=function(t){return t==t&&!Object(D.a)(t)},I=n(5);var z=function(t){for(var e=Object(I.a)(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,R(o)]}return e};var L=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};var C=function(t){var e=z(t);return 1==e.length&&e[0][2]?L(e[0][0],e[0][1]):function(n){return n===t||E(n,t,e)}},F=n(19),M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,N=/^\w*$/;var U=function(t,e){if(Object(m.a)(t))return!1;var n=o()(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Object(F.a)(t))||(N.test(t)||!M.test(t)||null!=e&&t in Object(e))},$=n(28);function B(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(B.Cache||$.a),n}B.Cache=$.a;var V=B;var q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,W=/\\(\\)?/g,G=function(t){var e=V(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(q,(function(t,n,r,o){e.push(r?o.replace(W,"$1"):n||t)})),e})),J=n(17),H=f.a?f.a.prototype:void 0,K=H?H.toString:void 0;var Q=function t(e){if("string"==typeof e)return e;if(Object(m.a)(e))return Object(J.a)(e,t)+"";if(Object(F.a)(e))return K?K.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n};var X=function(t){return null==t?"":Q(t)};var Y=function(t,e){return Object(m.a)(t)?t:U(t,e)?[t]:G(X(t))};var Z=function(t){if("string"==typeof t||Object(F.a)(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};var tt=function(t,e){for(var n=0,r=(e=Y(e,t)).length;null!=t&&n<r;)t=t[Z(e[n++])];return n&&n==r?t:void 0};var et=function(t,e,n){var r=null==t?void 0:tt(t,e);return void 0===r?n:r};var nt=function(t,e){return null!=t&&e in Object(t)},rt=n(38),ot=n(33),it=n(31);var at=function(t,e,n){for(var r=-1,o=(e=Y(e,t)).length,i=!1;++r<o;){var a=Z(e[r]);if(!(i=null!=t&&n(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&Object(it.a)(o)&&Object(ot.a)(a,o)&&(Object(m.a)(t)||Object(rt.a)(t))};var ct=function(t,e){return null!=t&&at(t,e,nt)};var ut=function(t,e){return U(t)&&R(e)?L(Z(t),e):function(n){var r=et(n,t);return void 0===r&&r===e?ct(n,t):k(e,r,3)}},st=n(48);var ft=function(t){return function(e){return null==e?void 0:e[t]}};var lt=function(t){return function(e){return tt(e,t)}};var pt=function(t){return U(t)?ft(Z(t)):lt(t)};e.a=function(t){return"function"==typeof t?t:null==t?st.a:"object"==o()(t)?Object(m.a)(t)?ut(t[0],t[1]):C(t):pt(t)}},function(t,e,n){"use strict";var r=function(){this.__data__=[],this.size=0},o=n(20);var i=function(t,e){for(var n=t.length;n--;)if(Object(o.a)(t[n][0],e))return n;return-1},a=Array.prototype.splice;var c=function(t){var e=this.__data__,n=i(e,t);return!(n<0)&&(n==e.length-1?e.pop():a.call(e,n,1),--this.size,!0)};var u=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]};var s=function(t){return i(this.__data__,t)>-1};var f=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=c,l.prototype.get=u,l.prototype.has=s,l.prototype.set=f;e.a=l},function(t,e,n){"use strict";var r=n(54),o=n(7);var i=function(t,e){return function(n,r){if(null==n)return n;if(!Object(o.a)(n))return t(n,r);for(var i=n.length,a=e?i:-1,c=Object(n);(e?a--:++a<i)&&!1!==r(c[a],a,c););return n}}(r.a);e.a=i},function(t,e,n){"use strict";var r=n(8),o=n(2),i=Object(r.a)(o.a,"Map");e.a=i},function(t,e,n){"use strict";var r=n(22);var o=function(){this.__data__=new r.a,this.size=0};var i=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};var a=function(t){return this.__data__.get(t)};var c=function(t){return this.__data__.has(t)},u=n(24),s=n(28);var f=function(t,e){var n=this.__data__;if(n instanceof r.a){var o=n.__data__;if(!u.a||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new s.a(o)}return n.set(t,e),this.size=n.size,this};function l(t){var e=this.__data__=new r.a(t);this.size=e.size}l.prototype.clear=o,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=c,l.prototype.set=f;e.a=l},function(t,e,n){"use strict";var r=n(8),o=n(2),i=Object(r.a)(o.a,"Set");e.a=i},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){"use strict";var r=n(8),o=Object(r.a)(Object,"create");var i=function(){this.__data__=o?o(null):{},this.size=0};var a=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},c=Object.prototype.hasOwnProperty;var u=function(t){var e=this.__data__;if(o){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return c.call(e,t)?e[t]:void 0},s=Object.prototype.hasOwnProperty;var f=function(t){var e=this.__data__;return o?void 0!==e[t]:s.call(e,t)};var l=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=o&&void 0===e?"__lodash_hash_undefined__":e,this};function p(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}p.prototype.clear=i,p.prototype.delete=a,p.prototype.get=u,p.prototype.has=f,p.prototype.set=l;var b=p,v=n(22),y=n(24);var h=function(){this.size=0,this.__data__={hash:new b,map:new(y.a||v.a),string:new b}},d=n(1),j=n.n(d);var O=function(t){var e=j()(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var g=function(t,e){var n=t.__data__;return O(e)?n["string"==typeof e?"string":"hash"]:n.map};var _=function(t){var e=g(this,t).delete(t);return this.size-=e?1:0,e};var m=function(t){return g(this,t).get(t)};var w=function(t){return g(this,t).has(t)};var S=function(t,e){var n=g(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function P(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}P.prototype.clear=h,P.prototype.delete=_,P.prototype.get=m,P.prototype.has=w,P.prototype.set=S;e.a=P},function(t,e,n){"use strict";var r=n(17),o=n(21),i=n(23),a=n(7);var c=function(t,e){var n=-1,r=Object(a.a)(t)?Array(t.length):[];return Object(i.a)(t,(function(t,o,i){r[++n]=e(t,o,i)})),r},u=n(0);e.a=function(t,e){return(Object(u.a)(t)?r.a:c)(t,Object(o.a)(e,3))}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){"use strict";e.a=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){"use strict";e.a=function(t){return function(e){return t(e)}}},function(t,e,n){"use strict";var r=n(1),o=n.n(r),i=/^(?:0|[1-9]\d*)$/;e.a=function(t,e){var n=o()(t);return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&i.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){"use strict";e.a=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){"use strict";var r=n(10),o=n(0),i=n(4);e.a=function(t){return"string"==typeof t||!Object(o.a)(t)&&Object(i.a)(t)&&"[object String]"==Object(r.a)(t)}},function(t,e,n){"use strict";var r=n(10),o=n(31),i=n(4),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var c=function(t){return Object(i.a)(t)&&Object(o.a)(t.length)&&!!a[Object(r.a)(t)]},u=n(32),s=n(15),f=s.a&&s.a.isTypedArray,l=f?Object(u.a)(f):c;e.a=l},function(t,e,n){"use strict";var r=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i},o=n(53),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,c=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return i.call(t,e)})))}:o.a;e.a=c},function(t,e,n){"use strict";var r=n(10),o=n(4);var i=function(t){return Object(o.a)(t)&&"[object Arguments]"==Object(r.a)(t)},a=Object.prototype,c=a.hasOwnProperty,u=a.propertyIsEnumerable,s=i(function(){return arguments}())?i:function(t){return Object(o.a)(t)&&c.call(t,"callee")&&!u.call(t,"callee")};e.a=s},function(t,e,n){var r=n(59);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){"use strict";var r=n(2).a.Uint8Array;e.a=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){"use strict";var r=n(51),o=n(37),i=n(5);e.a=function(t){return Object(r.a)(t,i.a,o.a)}},function(t,e,n){var r=n(1),o=n(41);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e,n){"use strict";(function(t){var r=n(1),o="object"==(void 0===t?"undefined":n.n(r)()(t))&&t&&t.Object===Object&&t;e.a=o}).call(this,n(62))},function(t,e,n){"use strict";var r=n(10),o=n(3);e.a=function(t){if(!Object(o.a)(t))return!1;var e=Object(r.a)(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){"use strict";e.a=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},function(t,e,n){"use strict";e.a=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){"use strict";e.a=function(t,e){return t.has(e)}},function(t,e,n){"use strict";var r=n(52),o=n(0);e.a=function(t,e,n){var i=e(t);return Object(o.a)(t)?i:Object(r.a)(i,n(t))}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},function(t,e,n){"use strict";e.a=function(){return[]}},function(t,e,n){"use strict";var r=function(t){return function(e,n,r){for(var o=-1,i=Object(e),a=r(e),c=a.length;c--;){var u=a[t?c:++o];if(!1===n(i[u],u,i))break}return e}}(),o=n(5);e.a=function(t,e){return t&&r(t,e,o.a)}},function(t,e,n){"use strict";var r=n(28);var o=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var i=function(t){return this.__data__.has(t)};function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r.a;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i;e.a=a},function(t,e,n){"use strict";var r=n(18),o=n(47),i=Object(o.a)(Object.keys,Object),a=Object.prototype.hasOwnProperty;e.a=function(t){if(!Object(r.a)(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){"use strict";var r=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r},o=n(38),i=n(0),a=n(14),c=n(33),u=n(36),s=Object.prototype.hasOwnProperty;e.a=function(t,e){var n=Object(i.a)(t),f=!n&&Object(o.a)(t),l=!n&&!f&&Object(a.a)(t),p=!n&&!f&&!l&&Object(u.a)(t),b=n||f||l||p,v=b?r(t.length,String):[],y=v.length;for(var h in t)!e&&!s.call(t,h)||b&&("length"==h||l&&("offset"==h||"parent"==h)||p&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Object(c.a)(h,y))||v.push(h);return v}},function(t,e,n){var r=n(27),o=n(59),i=n(75),a=n(76);function c(e){var n="function"==typeof Map?new Map:void 0;return t.exports=c=function(t){if(null===t||!i(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),o(e,t)},c(e)}t.exports=c},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r;
/*!
 * EventEmitter v5.1.0 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */!function(e){"use strict";function o(){}var i=o.prototype,a=e.EventEmitter;function c(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function u(t){return function(){return this[t].apply(this,arguments)}}i.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp)for(n in e={},r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n]);else e=r[t]||(r[t]=[]);return e},i.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},i.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},i.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&t(e.listener)}(e))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(t),o="object"==typeof e;for(n in r)r.hasOwnProperty(n)&&-1===c(r[n],e)&&r[n].push(o?e:{listener:e,once:!1});return this},i.on=u("addListener"),i.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},i.once=u("addOnceListener"),i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,e){var n,r,o=this.getListenersAsObject(t);for(r in o)o.hasOwnProperty(r)&&-1!==(n=c(o[r],e))&&o[r].splice(n,1);return this},i.off=u("removeListener"),i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,n){var r,o,i=t?this.removeListener:this.addListener,a=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=n.length;r--;)i.call(this,e,n[r]);else for(r in e)e.hasOwnProperty(r)&&(o=e[r])&&("function"==typeof o?i.call(this,r,o):a.call(this,r,o));return this},i.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},i.removeAllListeners=u("removeEvent"),i.emitEvent=function(t,e){var n,r,o,i,a=this.getListenersAsObject(t);for(i in a)if(a.hasOwnProperty(i))for(n=a[i].slice(0),o=0;o<n.length;o++)!0===(r=n[o]).once&&this.removeListener(t,r.listener),r.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},i.trigger=u("emitEvent"),i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},i.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return e.EventEmitter=a,o},void 0===(r=function(){return o}.call(e,n,e,t))||(t.exports=r)}(this||{})},function(t,e,n){var r=n(71),o=n(72),i=n(73),a=n(74);t.exports=function(t){return r(t)||o(t)||i(t)||a()}},function(t,e,n){"use strict";e.a=function(){return!1}},function(t,e,n){"use strict";(function(t){var r,o=n(13),i=n.n(o),a=n(67),c=n(68),u=n(11);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}try{r=window||t||{}}catch(t){r={}}var f={canStartSyncNow:function(t,e){e(null,!0)},sendRequest:function(t,e,n){n(null,{config:e,status:200,headers:{},data:{}})},getDataToSync:function(t,e){e(null)},getAllDataToSync:function(t,e){e(null)},getItems:function(t,e,n){n(null,[])},updateLocalData:function(t,e,n){n(null)},deserializeItem:function(t,e,n,r,o,i,a){var c;switch(n){case"change":case"new":c=i;break;default:c=o||r}a(null,c)},call:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return u.a.denodify(this,t).apply(void 0,n)}};e.a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({apiPrefix:"https://api-ng.pomotodo.com",debounce:5e3,blockRetryInterval:5e3,logger:new a.a,storage:r.localStorage||new c.a,autoBackgroundCompletelySync:!0,autoRetryRequestCount:5},f)}).call(this,n(62))},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(12),o=n.n(r),i=n(30),a=n.n(i),c=n(13),u=n.n(c);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l=function(){function t(e){o()(this,t),this.option=f(f({},this.constructor.defaultOption),e),this.logs=[],this.errors=[]}return a()(t,[{key:"log",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.option.print&&(t=console).log.apply(t,n),this.logs.push(n)}},{key:"error",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this.option.print&&(t=console).error.apply(t,n),this.errors.push(n)}}]),t}();u()(l,"defaultOption",{print:!0})},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(12),o=n.n(r),i=n(30),a=n.n(i),c=function(){function t(){o()(this,t),this.store={}}return a()(t,[{key:"key",value:function(t){return Object.keys(this.store)[t]}},{key:"getItem",value:function(t){return this.store[t]}},{key:"setItem",value:function(t,e){this.store[t]=e}},{key:"removeItem",value:function(t){delete this.store[t]}},{key:"clear",value:function(){this.store={}}},{key:"length",get:function(){return Object.keys(this.store).length}}]),t}()},function(t,e,n){"use strict";(function(t){var r=n(1),o=n.n(r),i=n(2),a="object"==("undefined"==typeof exports?"undefined":o()(exports))&&exports&&!exports.nodeType&&exports,c=a&&"object"==o()(t)&&t&&!t.nodeType&&t,u=c&&c.exports===a?i.a.Buffer:void 0,s=u?u.allocUnsafe:void 0;e.a=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(this,n(60)(t))},function(t,e,n){t.exports=n(78)},function(t,e,n){var r=n(61);t.exports=function(t){if(Array.isArray(t))return r(t)}},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},function(t,e,n){var r=n(61);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(t,e,n){var r=n(59),o=n(77);function i(e,n,a){return o()?t.exports=i=Reflect.construct:t.exports=i=function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&r(i,n.prototype),i},i.apply(null,arguments)}t.exports=i},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"SyncFailedError",(function(){return P})),n.d(r,"ResponseEntityEmptyError",(function(){return x})),n.d(r,"TimeoutError",(function(){return A}));var o=n(12),i=n.n(o),a=n(30),c=n.n(a),u=n(39),s=n.n(u),f=n(43),l=n.n(f),p=n(27),b=n.n(p),v=n(13),y=n.n(v),h=n(63),d=n.n(h),j=n(11),O=n(66),g=n(41),_=n.n(g),m=n(58),w=n.n(m);function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var o=b()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}var P=function(t){s()(n,t);var e=S(n);function n(t){var r;return i()(this,n),(r=e.call(this,t)).response=t,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_()(r),r.constructor),r.name="SyncFailedError",r.message="Sync failed",r}return n}(w()(Error)),x=function(t){s()(n,t);var e=S(n);function n(t){var r;return i()(this,n),(r=e.call(this,t)).response=t,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_()(r),r.constructor),r.name="ResponseEntityEmptyError",r.message="Response entity is empty",r}return n}(w()(Error)),A=function(t){s()(n,t);var e=S(n);function n(){var t;return i()(this,n),t=e.call(this),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_()(t),t.constructor),t.name="TimeoutError",t.message="timeout",t}return n}(w()(Error)),T=n(55);var k=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1};var E=function(t){return t!=t};var D=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1};var R=function(t,e,n){return e==e?D(t,e,n):k(t,E,n)};var I=function(t,e){return!!(null==t?0:t.length)&&R(t,e,0)>-1};var z=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1},L=n(50),C=n(26);var F=function(){},M=n(34),N=C.a&&1/Object(M.a)(new C.a([,-0]))[1]==1/0?function(t){return new C.a(t)}:F;var U=function(t,e,n){var r=-1,o=I,i=t.length,a=!0,c=[],u=c;if(n)a=!1,o=z;else if(i>=200){var s=e?null:N(t);if(s)return Object(M.a)(s);a=!1,o=L.a,u=new T.a}else u=e?[]:c;t:for(;++r<i;){var f=t[r],l=e?e(f):f;if(f=n||0!==f?f:0,a&&l==l){for(var p=u.length;p--;)if(u[p]===l)continue t;e&&u.push(l),c.push(f)}else o(u,l,n)||(u!==c&&u.push(l),c.push(f))}return c};var $=function(t){return t&&t.length?U(t):[]},B=n(5),V=n(17);var q=function(t,e){return Object(V.a)(e,(function(e){return t[e]}))};var W=function(t){return null==t?[]:q(t,Object(B.a)(t))},G=n(7),J=n(35),H=n(3),K=n(19),Q=/^\s+|\s+$/g,X=/^[-+]0x[0-9a-f]+$/i,Y=/^0b[01]+$/i,Z=/^0o[0-7]+$/i,tt=parseInt;var et=function(t){if("number"==typeof t)return t;if(Object(K.a)(t))return NaN;if(Object(H.a)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Object(H.a)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Q,"");var n=Y.test(t);return n||Z.test(t)?tt(t.slice(2),n?2:8):X.test(t)?NaN:+t};var nt=function(t){return t?(t=et(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var rt=function(t){var e=nt(t),n=e%1;return e==e?n?e-n:e:0},ot=Math.max;var it=function(t,e,n,r){t=Object(G.a)(t)?t:W(t),n=n&&!r?rt(n):0;var o=t.length;return n<0&&(n=ot(o+n,0)),Object(J.a)(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&R(t,e,n)>-1};var at=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},ct=n(23),ut=n(48);var st=function(t){return"function"==typeof t?t:ut.a},ft=n(0);var lt=function(t,e){return(Object(ft.a)(t)?at:ct.a)(t,st(e))},pt=n(29),bt=n(56),vt=n(9),yt=n(38),ht=n(14),dt=n(18),jt=n(36),Ot=Object.prototype.hasOwnProperty;var gt=function(t){if(null==t)return!0;if(Object(G.a)(t)&&(Object(ft.a)(t)||"string"==typeof t||"function"==typeof t.splice||Object(ht.a)(t)||Object(jt.a)(t)||Object(yt.a)(t)))return!t.length;var e=Object(vt.a)(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Object(dt.a)(t))return!Object(bt.a)(t).length;for(var n in t)if(Ot.call(t,n))return!1;return!0},_t=n(49),mt=n(21);var wt=function(t,e){var n;return Object(ct.a)(t,(function(t,r,o){return!(n=e(t,r,o))})),!!n},St=n(1),Pt=n.n(St),xt=n(20),At=n(33);var Tt=function(t,e,n){if(!Object(H.a)(n))return!1;var r=Pt()(e);return!!("number"==r?Object(G.a)(n)&&Object(At.a)(e,n.length):"string"==r&&e in n)&&Object(xt.a)(n[e],t)};var kt=function(t,e,n){var r=Object(ft.a)(t)?_t.a:wt;return n&&Tt(t,e,n)&&(e=void 0),r(t,Object(mt.a)(e,3))};var Et=function(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n};var Dt=function(t,e,n,r,o){return o(t,(function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)})),n};var Rt=function(t,e,n){var r=Object(ft.a)(t)?Et:Dt,o=arguments.length<3;return r(t,Object(mt.a)(e,4),n,o,ct.a)},It=n(8),zt=function(){try{var t=Object(It.a)(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var Lt=function(t,e,n){"__proto__"==e&&zt?zt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Ct=n(54);var Ft=function(t,e){var n={};return e=Object(mt.a)(e,3),Object(Ct.a)(t,(function(t,r,o){Lt(n,r,e(t,r,o))})),n},Mt=n(25),Nt=Object.prototype.hasOwnProperty;var Ut=function(t,e,n){var r=t[e];Nt.call(t,e)&&Object(xt.a)(r,n)&&(void 0!==n||e in t)||Lt(t,e,n)};var $t=function(t,e,n,r){var o=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var c=e[i],u=r?r(n[c],t[c],c,n,t):void 0;void 0===u&&(u=t[c]),o?Lt(n,c,u):Ut(n,c,u)}return n};var Bt=function(t,e){return t&&$t(e,Object(B.a)(e),t)},Vt=n(57);var qt=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},Wt=Object.prototype.hasOwnProperty;var Gt=function(t){if(!Object(H.a)(t))return qt(t);var e=Object(dt.a)(t),n=[];for(var r in t)("constructor"!=r||!e&&Wt.call(t,r))&&n.push(r);return n};var Jt=function(t){return Object(G.a)(t)?Object(Vt.a)(t,!0):Gt(t)};var Ht=function(t,e){return t&&$t(e,Jt(e),t)},Kt=n(69);var Qt=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e},Xt=n(37);var Yt=function(t,e){return $t(t,Object(Xt.a)(t),e)},Zt=n(52),te=n(47),ee=Object(te.a)(Object.getPrototypeOf,Object),ne=n(53),re=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Object(Zt.a)(e,Object(Xt.a)(t)),t=ee(t);return e}:ne.a;var oe=function(t,e){return $t(t,re(t),e)},ie=n(42),ae=n(51);var ce=function(t){return Object(ae.a)(t,Jt,re)},ue=Object.prototype.hasOwnProperty;var se=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ue.call(t,"index")&&(n.index=t.index,n.input=t.input),n},fe=n(40);var le=function(t){var e=new t.constructor(t.byteLength);return new fe.a(e).set(new fe.a(t)),e};var pe=function(t,e){var n=e?le(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},be=/\w*$/;var ve=function(t){var e=new t.constructor(t.source,be.exec(t));return e.lastIndex=t.lastIndex,e},ye=n(6),he=ye.a?ye.a.prototype:void 0,de=he?he.valueOf:void 0;var je=function(t){return de?Object(de.call(t)):{}};var Oe=function(t,e){var n=e?le(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var ge=function(t,e,n){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return le(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return pe(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Oe(t,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return ve(t);case"[object Set]":return new r;case"[object Symbol]":return je(t)}},_e=Object.create,me=function(){function t(){}return function(e){if(!Object(H.a)(e))return{};if(_e)return _e(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var we=function(t){return"function"!=typeof t.constructor||Object(dt.a)(t)?{}:me(ee(t))},Se=n(4);var Pe=function(t){return Object(Se.a)(t)&&"[object Map]"==Object(vt.a)(t)},xe=n(32),Ae=n(15),Te=Ae.a&&Ae.a.isMap,ke=Te?Object(xe.a)(Te):Pe;var Ee=function(t){return Object(Se.a)(t)&&"[object Set]"==Object(vt.a)(t)},De=Ae.a&&Ae.a.isSet,Re=De?Object(xe.a)(De):Ee,Ie={};Ie["[object Arguments]"]=Ie["[object Array]"]=Ie["[object ArrayBuffer]"]=Ie["[object DataView]"]=Ie["[object Boolean]"]=Ie["[object Date]"]=Ie["[object Float32Array]"]=Ie["[object Float64Array]"]=Ie["[object Int8Array]"]=Ie["[object Int16Array]"]=Ie["[object Int32Array]"]=Ie["[object Map]"]=Ie["[object Number]"]=Ie["[object Object]"]=Ie["[object RegExp]"]=Ie["[object Set]"]=Ie["[object String]"]=Ie["[object Symbol]"]=Ie["[object Uint8Array]"]=Ie["[object Uint8ClampedArray]"]=Ie["[object Uint16Array]"]=Ie["[object Uint32Array]"]=!0,Ie["[object Error]"]=Ie["[object Function]"]=Ie["[object WeakMap]"]=!1;var ze=function t(e,n,r,o,i,a){var c,u=1&n,s=2&n,f=4&n;if(r&&(c=i?r(e,o,i,a):r(e)),void 0!==c)return c;if(!Object(H.a)(e))return e;var l=Object(ft.a)(e);if(l){if(c=se(e),!u)return Qt(e,c)}else{var p=Object(vt.a)(e),b="[object Function]"==p||"[object GeneratorFunction]"==p;if(Object(ht.a)(e))return Object(Kt.a)(e,u);if("[object Object]"==p||"[object Arguments]"==p||b&&!i){if(c=s||b?{}:we(e),!u)return s?oe(e,Ht(c,e)):Yt(e,Bt(c,e))}else{if(!Ie[p])return i?e:{};c=ge(e,p,u)}}a||(a=new Mt.a);var v=a.get(e);if(v)return v;if(a.set(e,c),Re(e))return e.forEach((function(o){c.add(t(o,n,r,o,e,a))})),c;if(ke(e))return e.forEach((function(o,i){c.set(i,t(o,n,r,i,e,a))})),c;var y=f?s?ce:ie.a:s?keysIn:B.a,h=l?void 0:y(e);return at(h||e,(function(o,i){h&&(o=e[i=o]),Ut(c,i,t(o,n,r,i,e,a))})),c};var Le=function(t){return ze(t,5)};var Ce=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var i=t[e];i&&(o[r++]=i)}return o};function Fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var o=b()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return l()(this,n)}}function Me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Me(Object(n),!0).forEach((function(e){y()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ue=function(t,e,n){return t[n]="todo_order"===n?[]:$((t[n]||[]).concat(Object(B.a)(e))),t},$e=function(t){if(!Array.isArray(t))return t;var e=Ce(Object(pt.a)(t,"timeout")),n=e.length?Math.min.apply(Math,e):void 0,r=Ce(Object(pt.a)(t,"syncAllData")),o=kt(r);return Ne(Ne({},Object.assign.apply(Object,[{}].concat(t))),{},{timeout:n,syncAllData:o})},Be=function(t){s()(n,t);var e=Fe(n);function n(t){var r;return i()(this,n),(r=e.call(this)).initOption=Ne(Ne({},n.defaultOption),t),r.initOption.apiPrefix=r.initOption.apiPrefix.replace(/\/$/,""),r._nextSync=[],r._currentSync=[],r._syncCallbacks=[],r._doDebounceTimer=null,r._autoSwitchStatusTimer=null,r._doSyncRetryInfo=null,Promise.resolve(r.initOption.storage.getItem("ds_localdb_init_completely_synced")).then((function(t){1==t&&r.trigger("backgroundInitializeCompletelySyncSucceed")})),r}return c()(n,[{key:"cleanStoragedStatus",value:function(t){var e={lastSuccessTime:"ds_localdb_last_sync",lastFailTime:"app_last_sync_failed_time",backgroundInitializeCompletelySyncSucceed:"ds_localdb_init_completely_synced"};null==t?W(e).forEach(this.initOption.storage.removeItem.bind(this.initOption.storage)):null!=e[t]&&this.initOption.storage.removeItem(e[t])}},{key:"do",value:function(t,e,n){var r=this;if(!t)throw new Error("[Thinker] reason is required");var o=this.initOption.debounce;e&&null!=e.debounce&&(o=e.debounce);var i=[void 0,"waiting","succeed","failed"];it(i.concat(["preparing","blocking"]),this.status)?(it(i,this.status)?(this._changeStatus("preparing"),clearTimeout(this._autoSwitchStatusTimer),this._autoSwitchStatusTimer=null):clearTimeout(this._doDebounceTimer),this._syncCallbacks.push(n),this._currentSync.push({reason:t,passInOption:e}),this._doDebounceTimer=setTimeout((function(){clearTimeout(r._doDebounceTimer),r._doDebounceTimer=null,r._intoSync()}),o)):(this._syncCallbacks.push(n),this._nextSync.push({reason:t,passInOption:e})),this._doSyncRetryInfo&&this._doSyncRetryInfo.triedTimes()>1&&!this._doSyncRetryInfo.isCanceled()&&this._doSyncRetryInfo.cancel()}},{key:"_intoSync",value:function(){var t=this;this._callSync().then((function(){var e=t._syncCallbacks;t._syncCallbacks=[],t._changeStatus("succeed"),t.initOption.logger.log("[Thinker] succeed"),e.forEach((function(t){return"function"==typeof t&&t()}));var n=setTimeout((function(){t._autoSwitchStatusTimer===n&&(t._autoSwitchStatusTimer=null,t._changeStatus("waiting"))}),2e3);t._autoSwitchStatusTimer=n}),(function(e){var n=t._syncCallbacks;t._syncCallbacks=[],t._changeStatus("failed",[e]),t.initOption.logger.log("[Thinker] failed"),n.forEach((function(t){return"function"==typeof t&&t(e)}));var r=setTimeout((function(){t._autoSwitchStatusTimer===r&&(t._autoSwitchStatusTimer=null)}),2e3);return t._autoSwitchStatusTimer=r,Promise.reject(e)}))}},{key:"_callSync",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Promise.resolve(this.initOption.storage.getItem("ds_localdb_last_sync")).then((function(n){var r=Object(pt.a)(t._currentSync,"reason"),o=Object(pt.a)(t._currentSync,"passInOption"),i={passInOptions:o,isFirstTime:null==n},a=$e(o),c=function(n){return function(r){return t._tryToStartSecondSync(n,e,r)}};return t._changeStatus("blocking"),t._waitUntilCanSync(i,t.initOption).then((function(){return t._changeStatus("processing"),t.initOption.logger.log("[Thinker] start(".concat(e,"), reasons: \n  - ").concat(r.join("\n  - "))),t._doSync(i,a)})).then(c(!1),c(!0))}))}},{key:"_tryToStartSecondSync",value:function(t,e,n){return gt(this._nextSync)?(this._currentSync=[],t?Promise.reject(n):n):(this._currentSync=this._nextSync,this._nextSync=[],this._callSync(e+1))}},{key:"_waitUntilCanSync",value:function(t,e){var n=j.a.pending();return function r(){e.call("canStartSyncNow",t).then((function(t){if(!0===t)n.resolve();else{var o=Object(J.a)(t)?t:"some reason";e.logger.log("[Thinker] sync blocked by ".concat(o,", will try again after ").concat(e.blockRetryInterval/1e3," seconds")),setTimeout(r,e.blockRetryInterval)}})).catch(n.reject)}(),n.promise}},{key:"_changeStatus",value:function(t,e){this.status=t,this.trigger(t,e),this.trigger("statusChange",[t].concat(e))}},{key:"_doSync",value:function(t,e){var n,r=this,o=j.a.pending(),i=e.syncAllData?"getAllDataToSync":"getDataToSync",a=!1;return null!=e.timeout?n=e.timeout:e.syncAllData||null==this.initOption.timeout?e.syncAllData&&null!=this.initOption.syncAllDataTimeout&&(n=this.initOption.syncAllDataTimeout):n=this.initOption.timeout,null!=n&&setTimeout((function(){a=!0,o.reject(new A)}),n),this.initOption.call(i,t).then((function(n){if(!a)return r._sendSyncRequest(t,e,n)})).then((function(e){if(!a)return r._updateLocalData(t,e)})).then((function(t){if(!a){var e=j.a.parseValidDate(t.data.last_sync)||new Date;return r.initOption.storage.setItem("ds_localdb_last_sync",e.getTime()),r.initOption.storage.removeItem("app_last_sync_failed_time"),t}}),(function(t){if(!a)return r.initOption.storage.setItem("app_last_sync_failed_time",(new Date).getTime()),Promise.reject(t)})).then((function(n){a||r._tryToTriggerBackgroundInitializeCompletelySync(t,e)})).then((function(t){a||o.resolve(t)}),(function(t){a||o.reject(t)})),o.promise}},{key:"_tryToTriggerBackgroundInitializeCompletelySync",value:function(t,e){var n=this;if(!this.backgroundSyncing&&!this.backgroundInitializeCompletelySyncSucceed&&!t.background&&this.initOption.autoBackgroundCompletelySync){var r={syncAllData:!0},o={passInOptions:t.passInOptions.concat(r),isFirstTime:!1,background:!0};this.backgroundSyncing=!0,this._doSync(o,r).then((function(){n.backgroundSyncing=!1,n.initOption.storage.setItem("ds_localdb_init_completely_synced","true"),n.trigger("backgroundInitializeCompletelySyncSucceed")}),(function(t){n.backgroundSyncing=!1}))}}},{key:"_sendSyncRequest",value:function(t,e,n){var r=this;return Promise.resolve(this.initOption.storage.getItem("ds_localdb_last_sync")).then((function(o){var i,a={url:"".concat(r.initOption.apiPrefix,"/account/sync"),method:"POST",data:e.syncAllData?{objects:n}:o?{last_sync:j.a.parseValidDate(o).toJSON(),objects:n}:{fast_from:new Date(Date.now()-26784e5).toJSON(),objects:{}},params:null},c=function(e){return r.initOption.logger.log("[Thinker] request retry(".concat(e,")"),a),r.initOption.call("sendRequest",t,Le(a)).then((function(t){return t.config=a,t}),(function(t){return r.initOption.logger.error("[Thinker] request failed(".concat(e,")"),t),Promise.reject(t)}))};return r.initOption.autoRetryRequestCount?(r._doSyncRetryInfo=j.a.delayRetry(c,{maxRetryCount:r.initOption.autoRetryRequestCount}),i=r._doSyncRetryInfo.promise):i=c(1),i.then((function(t){if((t.status>=300||t.status<200)&&507!==t.status)throw new P(t);if(!t.data)throw new x(t);return t}))}))}},{key:"_updateLocalData",value:function(t,e){var n=this,r=e.config.data.objects,o=e.data.objects,i={};return Rt(r,Ue,i),Rt(o,Ue,i),this.initOption.call("getItems",t,i).then((function(a){return j.a.props(Ft(i,(function(i,c){var u=r[c],s=a[c],f=o[c];return n._deserializeItem(t,c,i,u,s,f,e)})))})).then((function(e){return lt(e,(function(t,n){gt(t)?delete e[n]:lt(t,(function(e,n){gt(e)&&delete t[n]}))})),n.initOption.call("updateLocalData",t,e)})).then((function(){return e}))}},{key:"_decideAction",value:function(t,e,n,r){var o=t&&t.updated_at?new Date(t.updated_at).valueOf():void 0,i=e&&e.updated_at?new Date(e.updated_at).valueOf():void 0,a=n&&n.updated_at?new Date(n.updated_at).valueOf():void 0;return e?n?i>a||i===a&&r?"doNothing":"update":r?"doNothing":t?i>o?"doNothing":i===o?"cleanDirty":"doNothing":"doNothing":n?"new":"doNothing"}},{key:"_deserializeItem",value:function(t,e,n,r,o,i,a){var c,u=this;if("todo_order"!==e&&it(a.data.failures,e))return null!=r&&(c=Rt(r,(function(t,e,n){return t[n]=o[n]||e,t}),{})),Promise.resolve({keepDirty:c||{}});if("todo_order"===e){var s=it(a.data.failures,"todo_order"),f=this._decideAction(r,o,i,s);return this.initOption.call("deserializeItem",t,e,f,r,o,i).then((function(t){return y()({},f,t)}))}var l=Rt(n,(function(n,c){var s=null!=r?r[c]:void 0,f=null!=o?o[c]:void 0,l=null!=i?i[c]:void 0,p=it(a.data.failures,"".concat(e,":").concat(c)),b=u._decideAction(s,f,l,p);return n[b]||(n[b]={}),n[b][c]=u.initOption.call("deserializeItem",t,e,b,s,f,l),n}),{});return j.a.props(Rt(l,(function(t,e,n){return t[n]=j.a.props(e),t}),{}))}}]),n}(d.a);Be.defaultOption=O.a,Be.mergeSyncOptions=$e,Be.status="waiting",lt(r,(function(t,e){Be[e]=t}));e.default=Be}])}));
//# sourceMappingURL=main.js.map